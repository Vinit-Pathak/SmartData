<div class="container mt-5">
  <h2 class="text-center mb-5">Shopping Cart</h2>

  <!-- Empty Cart Message -->
  <div *ngIf="cartItems.length === 0" class="text-center">
    <p class="fs-4 text-muted">Your cart is empty!</p>
    <a [routerLink]="['/customer-dashboard']" class="btn btn-outline-primary">Browse Products</a>
  </div>

  <!-- Cart Items -->
  <div *ngIf="cartItems.length > 0" class="row g-4">
    <!-- Cart Items List -->
    <div class="col-lg-8">
      <div class="card shadow-sm mb-4" *ngFor="let item of cartItems">
        <div class="row g-0 align-items-center">
          <div class="col-md-4">
            <img
              [src]="item.productImage"
              (error)="item.productImage = 'https://cdn.pixabay.com/photo/2022/08/01/07/59/vegetables-7357585_640.png'"
              class="img-fluid rounded-start"
              alt="Product Image"
            />
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title text-truncate">{{ item.productName }}</h5>
              <p class="card-text text-muted">{{ item.category }} | {{ item.brand }}</p>
              <p class="card-text text-success fs-5">Price: ${{ item.sellingPrice }}</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">
                  <button class="btn btn-outline-secondary btn-sm" (click)="decreaseQuantity(item)">
                    <i class="fas fa-minus"></i>
                  </button>
                  <span class="mx-3">{{ item.quantity }}</span>
                  <button class="btn btn-outline-secondary btn-sm" (click)="increaseQuantity(item)">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn btn-danger btn-sm" (click)="removeCartItem(item.cartId)">
                  <i class="fas fa-trash-alt"></i> Remove
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Summary Section -->
    <div class="col-lg-4">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">Cart Summary</h5>
        </div>
        <div class="card-body">
          <table class="table table-sm">
            <tbody>
              <tr>
                <td>Total Items:</td>
                <td class="text-end">{{ cartItems.length }}</td>
              </tr>
              <tr>
                <td>Total Price:</td>
                <td class="text-end">${{ calculateTotalPrice() }}</td>
              </tr>
              <tr>
                <td>Delivery Charges:</td>
                <td class="text-end">$10</td>
              </tr>
              <tr class="fw-bold">
                <td>Grand Total:</td>
                <td class="text-end">${{ calculateTotalPrice() + 10 }}</td>
              </tr>
            </tbody>
          </table>
          <hr />
          <h6 class="mb-3">Delivery Address</h6>
          <p class="small text-muted">
            <strong>{{users.firstName}} {{users.lastName}}</strong><br />
            123, Elm Street<br />
            Springfield, IL 62704
          </p>
          <button class="btn btn-success w-100">Proceed to Checkout</button>
        </div>
      </div>
    </div>
  </div>
</div>
